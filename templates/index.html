<!DOCTYPE html>
<html>
<head>
    <title>TrackMate â€“ Hand Detection</title>
</head>
<body>
<h2>MediaPipe Hand Tracking (Browser Camera)</h2>

<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>
<br>
<img id="output" />

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const output = document.getElementById("output");
const ctx = canvas.getContext("2d");

navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    video.srcObject = stream;
});

function sendFrame() {
    canvas.width = 640;
    canvas.height = 480;

    ctx.drawImage(video, 0, 0, 640, 480);
    const imageData = canvas.toDataURL("image/jpeg", 0.5);

    fetch("/process", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ image: imageData })
    })
    .then(res => res.blob())
    .then(blob => {
        output.src = URL.createObjectURL(blob);
    });
}

setInterval(sendFrame, 150); // ~10 FPS
</script>

</body>
</html>
